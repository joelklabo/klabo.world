{"id":"klabw-1l8","title":"Introduce feature flagging system","description":"Plan task 4.3: Select and integrate feature flag solution (e.g., LaunchDarkly, Statsig, or in-house), define rollout patterns, add guardrails and governance.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-28T09:51:10.747394-08:00","updated_at":"2025-11-28T21:43:29.817604-08:00","closed_at":"2025-11-28T21:43:29.817604-08:00","labels":["phase-4","platform-expandability"],"comments":[{"id":3,"issue_id":"klabw-1l8","author":"honk","text":"Update 2025-11-29: Runbook still good—plan to keep a provider-agnostic kernel aligned with OpenFeature (now a CNCF sandbox project) and start with in-memory defaults + Redis adapter for shared kill switch. LaunchDarkly Foundation pricing is ~ per 1k MAU with /service connection as of 2025, so we can defer SaaS adoption until we need experiments/audit; Statsig remains the backup. Proposed immediate work: scaffold app/src/lib/flags with metadata registry + adapters + Vitest for default/Redis/missing/kill-switch paths; add lint that requires owner+expiry/default; script to list expired flags; emit telemetry heartbeat; and wire the first flag to guard the tRPC pilot (klabw-2e0).","created_at":"2025-11-29T05:20:05Z"},{"id":5,"issue_id":"klabw-1l8","author":"honk","text":"2025-11-29: Implemented flag kernel in app/src/lib/flags (registry JSON + zod validation), env overrides (FEATURE_FLAGS_JSON), Redis adapter with kill-switch detection, provider stub, helpers (getFlag/getAll/withFlag), heartbeat logging, and expiry finder. Added first flag api-layer-pilot, Vitest coverage for default/env/Redis/kill-switch paths, and CI-friendly checker pnpm flags:check (scripts/list-expired-flags.js). Ran pnpm --filter app test to verify. Next: wire the first flag around the tRPC contexts/search pilot (klabw-2e0) and add lint to enforce metadata expiry/owner on new flags.","created_at":"2025-11-29T05:28:18Z"}]}
{"id":"klabw-1zo","title":"Section 3: Documentation \u0026 Knowledge Sharing","description":"Migrated from docs/plans/phase-4-stability.md. Tasks 3.1–3.4 (documentation audit, consolidate docs, ADRs, onboarding guide) are already completed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T09:50:37.478351-08:00","updated_at":"2025-11-28T10:03:13.877731-08:00","closed_at":"2025-11-28T09:50:39.981436-08:00","labels":["phase-4"]}
{"id":"klabw-2e0","title":"Design forward-looking API layer","description":"Plan task 4.2: Evaluate and choose structured API layer (tRPC vs GraphQL), propose migration path, and outline auth/typing/error patterns.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-28T09:51:07.095839-08:00","updated_at":"2025-11-28T21:43:25.132962-08:00","closed_at":"2025-11-28T21:43:25.132962-08:00","labels":["phase-4","platform-expandability"],"comments":[{"id":2,"issue_id":"klabw-2e0","author":"honk","text":"Update 2025-11-29: Validated ADR 0008 after checking 2025 releases. tRPC v11 adds RSC-friendly server actions/prefetch and superjson defaults, so it fits the Next 16 App Router stack; Apollo Server 5 remains the GraphQL LTS if we ever need a multi-client schema. Recommendation: keep tRPC for internal/admin, REST for public, defer GraphQL until external consumers exist. Proposed steps: (1) add trpc server harness (zod+superjson, NextAuth session in context) under app/src/server/trpc; (2) pilot contexts/search read router with typed server-action client while keeping REST endpoints; (3) add tracing + error taxonomy bridge + rate-limit hook; (4) gate pilot behind the first feature flag (klabw-1l8).","created_at":"2025-11-29T05:19:56Z"},{"id":6,"issue_id":"klabw-2e0","author":"honk","text":"2025-11-29: Implemented tRPC scaffold and pilot contexts/search router gated by api-layer-pilot flag. Added /api/trpc route using fetchRequestHandler, initTRPC+superjson error formatter, NextAuth-aware context, flag middleware, and Vitest coverage for list/search (flag on/off, input validation). Feature flag kernel (klabw-1l8) now guards this pilot; enable locally via FEATURE_FLAGS_JSON='{api-layer-pilot:true}'. All app tests passing.","created_at":"2025-11-29T05:34:15Z"},{"id":7,"issue_id":"klabw-2e0","author":"honk","text":"2025-11-29 follow-up: Added createServerCaller helper to use tRPC without HTTP (optional skipAuth) plus Vitest coverage. Pilot contexts/search stays flag-gated via api-layer-pilot.","created_at":"2025-11-29T05:37:07Z"}]}
{"id":"klabw-3n8","title":"Section 2: CI/CD Pipeline Hygiene","description":"Migrated from docs/plans/phase-4-stability.md. Tasks 2.1–2.5 (CI perf analysis, build time optimizations, test suite optimization, staging strategy, automated dependency updates) were completed prior to beads migration.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T09:50:31.561348-08:00","updated_at":"2025-11-28T10:03:13.878107-08:00","closed_at":"2025-11-28T09:50:34.144934-08:00","labels":["phase-4"]}
{"id":"klabw-4ki","title":"Modularize monorepo for faster builds","description":"Plan task 4.4: Propose modularization strategy (package boundaries, build graph tuning, caching), document sequencing and measurable build-time goals.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-28T09:51:14.380938-08:00","updated_at":"2025-11-28T10:03:13.877329-08:00","labels":["phase-4","platform-expandability"],"comments":[{"id":4,"issue_id":"klabw-4ki","author":"honk","text":"Update 2025-11-29: Holding pending klabw-gfu but queued next steps: (1) map current package boundaries (app, packages/config, packages/scripts, packages/ui) and decide which need standalone build/publish; (2) tighten turborepo pipeline with cache scopes + remote cache toggle to cut rebuild time; (3) baseline current dev/build times and set goals (\u003c60s cold build, \u003c5s incremental) before proposing splits; (4) consider extracting shared UI primitives into packages/ui and types into packages/types to keep app lean; (5) ensure pnpm workspace + turbo configs stay aligned with ADR 0006. Will start measurements once klabw-2e0/1l8 land.","created_at":"2025-11-29T05:20:14Z"}]}
{"id":"klabw-fh9","title":"Phase 4: Continuing Overview \u0026 Stability","description":"Meta tracking epic migrated from docs/plans/phase-4-stability.md covering ongoing stability and expansion work for klabo.world.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-28T09:49:29.082188-08:00","updated_at":"2025-11-28T10:03:13.87681-08:00","labels":["phase-4"],"dependencies":[{"issue_id":"klabw-fh9","depends_on_id":"klabw-xdc","type":"blocks","created_at":"2025-11-28T10:01:09.899041-08:00","created_by":"daemon"},{"issue_id":"klabw-fh9","depends_on_id":"klabw-3n8","type":"blocks","created_at":"2025-11-28T10:01:13.563089-08:00","created_by":"daemon"},{"issue_id":"klabw-fh9","depends_on_id":"klabw-1zo","type":"blocks","created_at":"2025-11-28T10:01:16.669779-08:00","created_by":"daemon"},{"issue_id":"klabw-fh9","depends_on_id":"klabw-gfu","type":"blocks","created_at":"2025-11-28T10:01:20.542921-08:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"klabw-fh9","author":"honk","text":"Prefix normalized from klabo.world -\u003e klabw to clear orphan warnings; dependency tree and ready list verified.","created_at":"2025-11-28T18:03:37Z"}]}
{"id":"klabw-gfu","title":"Section 4: Platform Expandability","description":"Migrated from docs/plans/phase-4-stability.md. Checklist: [x] 4.1 Component library refinement (done). [ ] 4.2 API layer design (choose tRPC/GraphQL and outline adoption). [ ] 4.3 Feature flagging system for gradual rollouts. [ ] 4.4 Modular monorepo strategy to isolate features and improve build times.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T09:50:44.585844-08:00","updated_at":"2025-11-28T10:03:13.8764-08:00","labels":["phase-4"],"dependencies":[{"issue_id":"klabw-gfu","depends_on_id":"klabw-2e0","type":"blocks","created_at":"2025-11-28T09:51:34.035501-08:00","created_by":"daemon"},{"issue_id":"klabw-gfu","depends_on_id":"klabw-1l8","type":"blocks","created_at":"2025-11-28T09:51:37.459976-08:00","created_by":"daemon"},{"issue_id":"klabw-gfu","depends_on_id":"klabw-4ki","type":"blocks","created_at":"2025-11-28T09:51:40.384737-08:00","created_by":"daemon"}]}
{"id":"klabw-gfu.1","title":"API layer design proposal (ADR)","description":"Deliver ADR for forward-looking API layer (tRPC vs GraphQL vs REST status quo) with decision, rationale, conventions (auth, typing, errors, pagination, caching), migration plan starting with a pilot surface, and telemetry hooks. Acceptance: ADR merged; migration plan staged with phases and owners.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T10:05:06.407248-08:00","updated_at":"2025-11-28T10:06:24.497623-08:00","labels":["api","phase-4","platform"],"dependencies":[{"issue_id":"klabw-gfu.1","depends_on_id":"klabw-gfu","type":"parent-child","created_at":"2025-11-28T10:05:06.408113-08:00","created_by":"daemon"}]}
{"id":"klabw-gfu.2","title":"Feature flag system selection \u0026 spike","description":"Select provider vs in-house, define flag lifecycle (naming, ownership, expiry, kill switch, audit), add middleware contract (server/client fetch + offline fallback), ship a minimal flag-backed path for one non-critical feature with tests. Acceptance: decision recorded, minimal flag in code behind guard, tests cover fallback.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T10:05:25.682786-08:00","updated_at":"2025-11-28T10:06:28.391897-08:00","labels":["feature-flags","phase-4","platform"],"dependencies":[{"issue_id":"klabw-gfu.2","depends_on_id":"klabw-gfu","type":"parent-child","created_at":"2025-11-28T10:05:25.683302-08:00","created_by":"daemon"}]}
{"id":"klabw-gfu.3","title":"Monorepo build modularity pilot","description":"Baseline turbo/CI timings; propose package boundary + cache strategy; pilot one optimization (e.g., pruned app build or remote cache) with before/after; document plan and risks. Acceptance: metrics captured, proposal written, one pilot change with measured improvement and follow-up tasks filed.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-28T10:05:29.917344-08:00","updated_at":"2025-11-28T10:06:32.197899-08:00","labels":["build","monorepo","phase-4"],"dependencies":[{"issue_id":"klabw-gfu.3","depends_on_id":"klabw-gfu","type":"parent-child","created_at":"2025-11-28T10:05:29.91783-08:00","created_by":"daemon"}]}
{"id":"klabw-xdc","title":"Section 1: Enhanced Monitoring \u0026 Alerting","description":"Migrated from docs/plans/phase-4-stability.md. Tasks: 1.1 Consolidate dashboards; 1.2 Define key metrics and SLOs; 1.3 SLO-based alerting; 1.4 Frontend performance monitoring; 1.5 Structured logging review. All marked complete in the plan prior to beads migration.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T09:50:25.54805-08:00","updated_at":"2025-11-28T10:03:13.878504-08:00","closed_at":"2025-11-28T09:50:28.302298-08:00","labels":["phase-4"]}
